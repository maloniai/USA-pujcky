(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{3231:function(e,t,n){Promise.resolve().then(n.t.bind(n,8003,23)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,750)),Promise.resolve().then(n.bind(n,329)),Promise.resolve().then(n.bind(n,6373))},9763:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=(e,t)=>{let n=(0,s.forwardRef)((n,r)=>{let{color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...m}=n;return(0,s.createElement)("svg",{ref:r,...a,width:l,height:l,stroke:i,strokeWidth:d?24*Number(c)/Number(l):c,className:"lucide lucide-".concat(o(e)),...m},[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...(Array.isArray(u)?u:[u])||[]])});return n.displayName="".concat(e),n}},750:function(e,t,n){"use strict";n.d(t,{default:function(){return f}});var s=n(7437),a=n(2265),o=n(9763);let r=(0,o.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),i=(0,o.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),l=(0,o.Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),c=(0,o.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);var d=n(2381),u=n(3448);let m={id:"intro",role:"assistant",content:"Hi there! I can answer questions about personal loans across the USA, highlight state-specific insights, and share compliance reminders. How can I help you today?"};var f=function(){let[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)([m]),[f,h]=(0,a.useState)(""),[p,x]=(0,a.useState)(!1),[b,g]=(0,a.useState)(null),y=(0,a.useRef)(null),v=(0,a.useRef)(null),w=(0,a.useCallback)(()=>{t(e=>!e),g(null)},[]);(0,a.useEffect)(()=>{if(e){var t;null===(t=v.current)||void 0===t||t.focus()}},[e]),(0,a.useEffect)(()=>{if(!e)return;let n=e=>{"Escape"===e.key&&t(!1)};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e]),(0,a.useEffect)(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[n,p]);let k=(0,a.useMemo)(()=>f.trim().length>0&&!p,[f,p]),j=(0,a.useCallback)(async()=>{let e=f.trim();if(!e||p)return;let t={id:"user-".concat(Date.now()),role:"user",content:e},s=[...n.filter(e=>"intro"!==e.id),t];o(e=>[...e,t]),h(""),x(!0),g(null);try{var a;let t=await fetch("/api/ai-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s.map(e=>{let{role:t,content:n}=e;return{role:t,content:n}}),question:e})});if(!t.ok)throw Error("Unable to reach the AI assistant. Please try again in a few moments.");let n=await t.json(),r={id:"assistant-".concat(Date.now()),role:"assistant",content:(null==n?void 0:null===(a=n.message)||void 0===a?void 0:a.trim())||"I ran into an issue retrieving an answer. Please try asking again.",citations:Array.isArray(null==n?void 0:n.citations)?n.citations:void 0};o(e=>[...e,r])}catch(e){console.error("ChatWidget error",e),g(e instanceof Error?e.message:"Something went wrong. Please try again later.")}finally{x(!1)}},[f,p,n]),N=(0,a.useCallback)(async e=>{e.preventDefault(),await j()},[j]),_=(0,a.useCallback)(async e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),await j())},[j]);return(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-3",children:[e&&(0,s.jsxs)("div",{id:"loan-ai-assistant",className:"w-[320px] sm:w-[380px] rounded-2xl border border-slate-200 bg-white shadow-2xl",children:[(0,s.jsxs)("header",{className:"flex items-start justify-between gap-2 border-b border-slate-100 px-4 py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Loan AI Assistant"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Grounded in our USA knowledge base and Azure AI Foundry"})]}),(0,s.jsx)("button",{type:"button",onClick:w,className:"rounded-full p-1 text-slate-500 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Close chat assistant",children:(0,s.jsx)(r,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex h-[440px] flex-col",children:[(0,s.jsxs)("div",{ref:y,className:"flex-1 space-y-4 overflow-y-auto bg-slate-50 px-4 py-4",children:[n.map(e=>(0,s.jsx)("div",{className:(0,u.cn)("flex w-full",{"justify-end":"user"===e.role,"justify-start":"assistant"===e.role}),children:(0,s.jsxs)("div",{className:(0,u.cn)("max-w-[80%] rounded-2xl px-3 py-2 text-sm shadow-sm","user"===e.role?"bg-blue-600 text-white":"bg-white text-slate-900"),children:[(0,s.jsx)("p",{className:"whitespace-pre-line leading-relaxed",children:e.content}),"assistant"===e.role&&e.citations&&(0,s.jsxs)("div",{className:"mt-2 space-y-1 border-t border-slate-100 pt-2 text-xs text-slate-500",children:[(0,s.jsx)("p",{className:"font-medium text-slate-600",children:"Sources"}),(0,s.jsx)("ul",{className:"space-y-1",children:e.citations.map((t,n)=>(0,s.jsx)("li",{children:t.url?(0,s.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"break-words text-blue-600 hover:underline",children:t.title||t.url}):(0,s.jsx)("span",{className:"break-words",children:t.title||t.content||"Knowledge base excerpt"})},"".concat(e.id,"-citation-").concat(n)))})]})]})},e.id)),p&&(0,s.jsx)("div",{className:"flex w-full justify-start",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-2xl bg-white px-3 py-2 text-sm text-slate-600 shadow-sm",children:[(0,s.jsx)(i,{className:"h-4 w-4 animate-spin"}),"Thinking through the latest regulations…"]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 bg-white px-4 py-3",children:[b&&(0,s.jsx)("div",{className:"mb-2 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:b}),(0,s.jsxs)("form",{className:"space-y-2",onSubmit:N,children:[(0,s.jsx)("textarea",{ref:v,value:f,onChange:e=>h(e.target.value),onKeyDown:_,rows:3,placeholder:"Ask about APRs, state rules, lender comparisons, or compliance guidance…",className:"w-full resize-none rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-[11px] text-slate-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(l,{className:"h-3.5 w-3.5 text-blue-600"}),(0,s.jsx)("span",{children:"Educational guidance only—consult licensed experts before acting."})]}),(0,s.jsx)(d.z,{type:"submit",size:"sm",disabled:!k,children:p?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(i,{className:"h-4 w-4 animate-spin"}),"Sending"]}):"Send"})]})]})]})]})]}),(0,s.jsx)(d.z,{type:"button",size:"lg",onClick:w,className:"shadow-xl","aria-expanded":e,"aria-controls":"loan-ai-assistant",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5"}),e?"Hide AI assistant":"Chat with AI"]})})]})}},329:function(e,t,n){"use strict";n.d(t,{default:function(){return f}});var s=n(7437),a=n(2265),o=n(7648),r=n(9376),i=n(82);let l="loan_ai_cookie_consent",c="loan_ai_cookie_consent",d={en:{title:"Your Privacy Choices",body:"We use cookies to keep the site running, understand performance, and improve lender matching. We do not sell personal information, and you can decline non-essential cookies at any time.",accept:"Allow Cookies",optOut:"Decline Non-Essential Cookies",analyticsNote:"Declining disables analytics and advertising cookies while retaining those strictly necessary."},es:{title:"Tus opciones de privacidad",body:"Usamos cookies para funciones esenciales, medir rendimiento y mejorar la coincidencia con prestamistas. No vendemos informaci\xf3n personal y puedes rechazar las cookies no esenciales cuando quieras.",accept:"Permitir cookies",optOut:"Rechazar cookies no esenciales",analyticsNote:"Rechazar desactiva las cookies de anal\xedtica y publicidad, dejando solo las estrictamente necesarias."},cs:{title:"Vaše možnosti ochrany soukrom\xed",body:"Použ\xedv\xe1me cookies pro z\xe1kladn\xed provoz webu, měřen\xed v\xfdkonu a zlepšen\xed p\xe1rov\xe1n\xed s věřiteli. Neprod\xe1v\xe1me osobn\xed \xfadaje a neesenci\xe1ln\xed cookies můžete kdykoli odm\xedtnout.",accept:"Povolit cookies",optOut:"Odm\xedtnout neesenci\xe1ln\xed cookies",analyticsNote:"Odm\xedtnut\xed deaktivuje analytick\xe9 a reklamn\xed cookies, ponech\xe1 pouze ty nezbytně nutn\xe9."}};function u(e){"undefined"!=typeof document&&(document.cookie="".concat(l,"=").concat(e,";path=/;max-age=").concat(31536e3,";SameSite=Lax"));try{window.localStorage.setItem(c,e)}catch(e){console.warn("Unable to persist cookie consent preference",e)}}function m(e){"function"==typeof window.gtag&&("accepted"===e?window.gtag("consent","update",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"}):window.gtag("consent","update",{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied"}))}function f(){var e;let t=(0,r.usePathname)(),n=(0,a.useMemo)(()=>t?(0,i.FV)(t):i.ZW,[t]),[f,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=function(){if("undefined"==typeof document)return null;let e=document.cookie.split(";").map(e=>e.trim()).find(e=>e.startsWith("".concat(l,"=")));if(!e)return null;let[,t]=e.split("=");return"accepted"===t||"opted_out"===t?t:null}();if(e){m(e);return}try{let e=window.localStorage.getItem(c);if("accepted"===e||"opted_out"===e){u(e),m(e);return}}catch(e){console.warn("Unable to read stored cookie consent preference",e)}h(!0)},[]);let p=e=>{u(e),m(e),h(!1)},x=null!==(e=d[n])&&void 0!==e?e:d[i.ZW];return f?(0,s.jsx)("aside",{className:"fixed inset-x-4 bottom-4 z-[60] rounded-2xl border border-slate-200 bg-white/95 p-5 shadow-xl backdrop-blur-sm sm:inset-x-auto sm:left-1/2 sm:w-[min(640px,90vw)] sm:-translate-x-1/2",role:"dialog","aria-live":"polite","aria-label":x.title,children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:x.title}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:x.body})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row",children:[(0,s.jsx)("button",{type:"button",onClick:()=>p("accepted"),className:"inline-flex flex-1 items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-700 transition-colors",children:x.accept}),(0,s.jsx)("button",{type:"button",onClick:()=>p("opted_out"),className:"inline-flex flex-1 items-center justify-center rounded-md border border-blue-600 px-4 py-2 text-sm font-semibold text-blue-700 shadow-sm transition-colors hover:bg-blue-50",children:x.optOut})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:x.analyticsNote}),(0,s.jsx)(o.default,{href:"/privacy",className:"text-xs text-blue-700 underline decoration-dotted hover:text-blue-900",children:"cs"===n?"Přečtěte si naše \xfapln\xe9 z\xe1sady ochrany osobn\xedch \xfadajů":"es"===n?"Lee nuestra pol\xedtica de privacidad completa":"Read our full privacy policy"})]})}):null}},6373:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var s=n(2265);function a(e){let{locale:t}=e;return(0,s.useEffect)(()=>{if("undefined"!=typeof document){var e;document.documentElement.lang=t,document.documentElement.setAttribute("data-locale",t),null===(e=document.body)||void 0===e||e.setAttribute("data-locale",t)}},[t]),null}},2381:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var s=n(7437),a=n(2265),o=n(3448);let r=a.forwardRef((e,t)=>{let{className:n,variant:a="default",size:r="default",...i}=e;return(0,s.jsx)("button",{className:(0,o.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-blue-600 text-white hover:bg-blue-700":"default"===a,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===a,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===a,"bg-red-600 text-white hover:bg-red-700":"destructive"===a},{"h-10 py-2 px-4":"default"===r,"h-9 px-3":"sm"===r,"h-11 px-8":"lg"===r},n),ref:t,...i})});r.displayName="Button"},82:function(e,t,n){"use strict";n.d(t,{FV:function(){return o},ZW:function(){return a},_R:function(){return r},cl:function(){return l},vj:function(){return i},zc:function(){return c}});let s=["en","es","cs"],a="en";function o(e){if(!e)return a;let t=e.split("/").filter(Boolean);if(0===t.length)return a;let[n]=t;return function(e){if(!e)return a;let t=e.toLowerCase();return s.includes(t)?t:t.startsWith("es")?"es":t.startsWith("cs")||t.startsWith("cz")?"cs":a}(n)}function r(e){let t=o(e);if(t===a)return e;let n="/".concat(t);if(e.startsWith(n)){let t=e.slice(n.length);return t.startsWith("/")?t:"/".concat(t)}return e}function i(e,t){if(t===a)return e.startsWith("/")?e:"/".concat(e);let n=e.startsWith("/")?e:"/".concat(e);if("/"===n||""===n)return"/".concat(t);let s=r(n);return"/".concat(t).concat(s)}function l(e){let t=(s.indexOf(e)+1)%s.length;return s[t]}function c(e){try{window.localStorage.setItem("loan-ai-locale",e)}catch(e){console.warn("Unable to persist locale to localStorage",e)}try{document.cookie="".concat("loan_ai_locale","=").concat(e,";path=/;max-age=").concat(31536e3,";SameSite=Lax")}catch(e){console.warn("Unable to persist locale cookie",e)}}},3448:function(e,t,n){"use strict";n.d(t,{cn:function(){return o}});var s=n(1994),a=n(3335);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,s.W)(t))}},2778:function(){}},function(e){e.O(0,[2461,2972,257,8003,2971,2117,1744],function(){return e(e.s=3231)}),_N_E=e.O()}]);