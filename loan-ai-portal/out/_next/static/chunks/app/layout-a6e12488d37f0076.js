(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1219:function(e,t,n){Promise.resolve().then(n.t.bind(n,8003,23)),Promise.resolve().then(n.t.bind(n,1358,23)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,4207)),Promise.resolve().then(n.bind(n,329)),Promise.resolve().then(n.bind(n,6373))},4207:function(e,t,n){"use strict";n.d(t,{default:function(){return x}});var s=n(7437),a=n(2265),i=n(2489),r=n(5863),o=n(4286),l=n(2718),c=n(1994),d=n(3335);function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.m6)((0,c.W)(t))}let f=a.forwardRef((e,t)=>{let{className:n,variant:a="default",size:i="default",...r}=e;return(0,s.jsx)("button",{className:u("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-blue-600 text-white hover:bg-blue-700":"default"===a,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===a,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===a,"bg-red-600 text-white hover:bg-red-700":"destructive"===a},{"h-10 py-2 px-4":"default"===i,"h-9 px-3":"sm"===i,"h-11 px-8":"lg"===i},n),ref:t,...r})});f.displayName="Button";let m={id:"intro",role:"assistant",content:"Hi there! I can answer questions about personal loans across the USA, highlight state-specific insights, and share compliance reminders. How can I help you today?"};var x=function(){let[e,t]=(0,a.useState)(!1),[n,c]=(0,a.useState)([m]),[d,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(null),y=(0,a.useRef)(null),w=(0,a.useRef)(null),v=(0,a.useCallback)(()=>{t(e=>!e),g(null)},[]);(0,a.useEffect)(()=>{if(e){var t;null===(t=w.current)||void 0===t||t.focus()}},[e]),(0,a.useEffect)(()=>{if(!e)return;let n=e=>{"Escape"===e.key&&t(!1)};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e]),(0,a.useEffect)(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[n,h]);let j=(0,a.useMemo)(()=>d.trim().length>0&&!h,[d,h]),N=(0,a.useCallback)(async()=>{let e=d.trim();if(!e||h)return;let t={id:"user-".concat(Date.now()),role:"user",content:e},s=[...n.filter(e=>"intro"!==e.id),t];c(e=>[...e,t]),x(""),p(!0),g(null);try{var a;let t=await fetch("/api/ai-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s.map(e=>{let{role:t,content:n}=e;return{role:t,content:n}}),question:e})});if(!t.ok)throw Error("Unable to reach the AI assistant. Please try again in a few moments.");let n=await t.json(),i={id:"assistant-".concat(Date.now()),role:"assistant",content:(null==n?void 0:null===(a=n.message)||void 0===a?void 0:a.trim())||"I ran into an issue retrieving an answer. Please try asking again.",citations:Array.isArray(null==n?void 0:n.citations)?n.citations:void 0};c(e=>[...e,i])}catch(e){console.error("ChatWidget error",e),g(e instanceof Error?e.message:"Something went wrong. Please try again later.")}finally{p(!1)}},[d,h,n]),k=(0,a.useCallback)(async e=>{e.preventDefault(),await N()},[N]),_=(0,a.useCallback)(async e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),await N())},[N]);return(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-3",children:[e&&(0,s.jsxs)("div",{id:"loan-ai-assistant",className:"w-[320px] sm:w-[380px] rounded-2xl border border-slate-200 bg-white shadow-2xl",children:[(0,s.jsxs)("header",{className:"flex items-start justify-between gap-2 border-b border-slate-100 px-4 py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Loan AI Assistant"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Grounded in our USA knowledge base and Azure AI Foundry"})]}),(0,s.jsx)("button",{type:"button",onClick:v,className:"rounded-full p-1 text-slate-500 transition hover:bg-slate-100 hover:text-slate-700","aria-label":"Close chat assistant",children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex h-[440px] flex-col",children:[(0,s.jsxs)("div",{ref:y,className:"flex-1 space-y-4 overflow-y-auto bg-slate-50 px-4 py-4",children:[n.map(e=>(0,s.jsx)("div",{className:u("flex w-full",{"justify-end":"user"===e.role,"justify-start":"assistant"===e.role}),children:(0,s.jsxs)("div",{className:u("max-w-[80%] rounded-2xl px-3 py-2 text-sm shadow-sm","user"===e.role?"bg-blue-600 text-white":"bg-white text-slate-900"),children:[(0,s.jsx)("p",{className:"whitespace-pre-line leading-relaxed",children:e.content}),"assistant"===e.role&&e.citations&&(0,s.jsxs)("div",{className:"mt-2 space-y-1 border-t border-slate-100 pt-2 text-xs text-slate-500",children:[(0,s.jsx)("p",{className:"font-medium text-slate-600",children:"Sources"}),(0,s.jsx)("ul",{className:"space-y-1",children:e.citations.map((t,n)=>(0,s.jsx)("li",{children:t.url?(0,s.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"break-words text-blue-600 hover:underline",children:t.title||t.url}):(0,s.jsx)("span",{className:"break-words",children:t.title||t.content||"Knowledge base excerpt"})},"".concat(e.id,"-citation-").concat(n)))})]})]})},e.id)),h&&(0,s.jsx)("div",{className:"flex w-full justify-start",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-2xl bg-white px-3 py-2 text-sm text-slate-600 shadow-sm",children:[(0,s.jsx)(r.Z,{className:"h-4 w-4 animate-spin"}),"Thinking through the latest regulations…"]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 bg-white px-4 py-3",children:[b&&(0,s.jsx)("div",{className:"mb-2 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:b}),(0,s.jsxs)("form",{className:"space-y-2",onSubmit:k,children:[(0,s.jsx)("textarea",{ref:w,value:d,onChange:e=>x(e.target.value),onKeyDown:_,rows:3,placeholder:"Ask about APRs, state rules, lender comparisons, or compliance guidance…",className:"w-full resize-none rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-[11px] text-slate-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(o.Z,{className:"h-3.5 w-3.5 text-blue-600"}),(0,s.jsx)("span",{children:"Educational guidance only—consult licensed experts before acting."})]}),(0,s.jsx)(f,{type:"submit",size:"sm",disabled:!j,children:h?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Z,{className:"h-4 w-4 animate-spin"}),"Sending"]}):"Send"})]})]})]})]})]}),(0,s.jsx)(f,{type:"button",size:"lg",onClick:v,className:"shadow-xl","aria-expanded":e,"aria-controls":"loan-ai-assistant",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"h-5 w-5"}),e?"Hide AI assistant":"Chat with AI"]})})]})}},329:function(e,t,n){"use strict";n.d(t,{default:function(){return m}});var s=n(7437),a=n(2265),i=n(7648),r=n(9376),o=n(82);let l="loan_ai_cookie_consent",c="loan_ai_cookie_consent",d={en:{title:"Your Privacy Choices",body:"We use cookies to keep the site running, understand performance, and improve lender matching. We do not sell personal information, and you can decline non-essential cookies at any time.",accept:"Allow Cookies",optOut:"Decline Non-Essential Cookies",analyticsNote:"Declining disables analytics and advertising cookies while retaining those strictly necessary."},es:{title:"Tus opciones de privacidad",body:"Usamos cookies para funciones esenciales, medir rendimiento y mejorar la coincidencia con prestamistas. No vendemos informaci\xf3n personal y puedes rechazar las cookies no esenciales cuando quieras.",accept:"Permitir cookies",optOut:"Rechazar cookies no esenciales",analyticsNote:"Rechazar desactiva las cookies de anal\xedtica y publicidad, dejando solo las estrictamente necesarias."}};function u(e){"undefined"!=typeof document&&(document.cookie="".concat(l,"=").concat(e,";path=/;max-age=").concat(31536e3,";SameSite=Lax"));try{window.localStorage.setItem(c,e)}catch(e){console.warn("Unable to persist cookie consent preference",e)}}function f(e){"function"==typeof window.gtag&&("accepted"===e?window.gtag("consent","update",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"}):window.gtag("consent","update",{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied"}))}function m(){var e;let t=(0,r.usePathname)(),n=(0,a.useMemo)(()=>t?(0,o.FV)(t):o.ZW,[t]),[m,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=function(){if("undefined"==typeof document)return null;let e=document.cookie.split(";").map(e=>e.trim()).find(e=>e.startsWith("".concat(l,"=")));if(!e)return null;let[,t]=e.split("=");return"accepted"===t||"opted_out"===t?t:null}();if(e){f(e);return}try{let e=window.localStorage.getItem(c);if("accepted"===e||"opted_out"===e){u(e),f(e);return}}catch(e){console.warn("Unable to read stored cookie consent preference",e)}x(!0)},[]);let h=e=>{u(e),f(e),x(!1)},p=null!==(e=d[n])&&void 0!==e?e:d[o.ZW];return m?(0,s.jsx)("aside",{className:"fixed inset-x-4 bottom-4 z-[60] rounded-2xl border border-slate-200 bg-white/95 p-5 shadow-xl backdrop-blur-sm sm:inset-x-auto sm:left-1/2 sm:w-[min(640px,90vw)] sm:-translate-x-1/2",role:"dialog","aria-live":"polite","aria-label":p.title,children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:p.title}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:p.body})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row",children:[(0,s.jsx)("button",{type:"button",onClick:()=>h("accepted"),className:"inline-flex flex-1 items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-700 transition-colors",children:p.accept}),(0,s.jsx)("button",{type:"button",onClick:()=>h("opted_out"),className:"inline-flex flex-1 items-center justify-center rounded-md border border-blue-600 px-4 py-2 text-sm font-semibold text-blue-700 shadow-sm transition-colors hover:bg-blue-50",children:p.optOut})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:p.analyticsNote}),(0,s.jsx)(i.default,{href:"/privacy",className:"text-xs text-blue-700 underline decoration-dotted hover:text-blue-900",children:"es"===n?"Lee nuestra pol\xedtica de privacidad completa":"Read our full privacy policy"})]})}):null}},6373:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var s=n(2265);function a(e){let{locale:t}=e;return(0,s.useEffect)(()=>{if("undefined"!=typeof document){var e;document.documentElement.lang=t,document.documentElement.setAttribute("data-locale",t),null===(e=document.body)||void 0===e||e.setAttribute("data-locale",t)}},[t]),null}},82:function(e,t,n){"use strict";n.d(t,{FV:function(){return i},ZW:function(){return a},_R:function(){return r},cl:function(){return l},vj:function(){return o},zc:function(){return c}});let s=["en","es"],a="en";function i(e){if(!e)return a;let t=e.split("/").filter(Boolean);if(0===t.length)return a;let[n]=t;return function(e){if(!e)return a;let t=e.toLowerCase();return s.includes(t)?t:t.startsWith("es")?"es":a}(n)}function r(e){let t=i(e);if(t===a)return e;let n="/".concat(t);if(e.startsWith(n)){let t=e.slice(n.length);return t.startsWith("/")?t:"/".concat(t)}return e}function o(e,t){if(t===a)return e.startsWith("/")?e:"/".concat(e);let n=e.startsWith("/")?e:"/".concat(e);if("/"===n||""===n)return"/".concat(t);let s=r(n);return"/".concat(t).concat(s)}function l(e){return"en"===e?"es":"en"}function c(e){try{window.localStorage.setItem("loan-ai-locale",e)}catch(e){console.warn("Unable to persist locale to localStorage",e)}try{document.cookie="".concat("loan_ai_locale","=").concat(e,";path=/;max-age=").concat(31536e3,";SameSite=Lax")}catch(e){console.warn("Unable to persist locale cookie",e)}}},2778:function(){}},function(e){e.O(0,[513,972,559,208,971,117,744],function(){return e(e.s=1219)}),_N_E=e.O()}]);